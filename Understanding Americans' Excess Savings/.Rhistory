geom_bar(stat = "identity", color = NA) +
xlab("Household Income Bin") +
ylab("") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1)) +
ggtitle("Do You Have Emergency Funds That Could Cover 3 Months' Expenses?") +
labs(caption = "Graph created by @JosephPolitano using Federal Reserve data", subtitle = "Responses by Household Income, Weighted, 2021") +
theme_economist() +
scale_fill_economist(name="")
levels(Emergency_Expenses21$EF1) <- list("No" = "No","Yes"="Yes",) #renaming and reordering the answers
levels(Emergency_Expenses21$EF1) <- list("No" = "No","Yes"="Yes") #renaming and reordering the answers
ggplot(Emergency_Expenses21, aes(x = ppinc7,pct/100, fill = EF1))+
geom_bar(stat = "identity", color = NA) +
xlab("Household Income Bin") +
ylab("") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1)) +
ggtitle("Do You Have Emergency Funds That Could Cover 3 Months' Expenses?") +
labs(caption = "Graph created by @JosephPolitano using Federal Reserve data", subtitle = "Responses by Household Income, Weighted, 2021") +
theme_economist() +
scale_fill_economist(name="")
ggplot(Emergency_Expenses21, aes(x = ppinc7,pct/100, fill = EF1))+
geom_bar(stat = "identity", color = NA) +
xlab("Household Income Bin") +
ylab("") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1)) +
ggtitle("Do You Have Emergency Funds That Could Cover 3 Months' Expenses?") +
labs(caption = "Graph created by @JosephPolitano using Federal Reserve data", subtitle = "Responses by Household Income, Weighted, 2021") +
theme_economist() +
scale_fill_economist(name="", breaks = c("Yes","No"))
ggplot(Emergency_Expenses21, aes(x = ppinc7,pct/100, fill = EF1))+
geom_bar(stat = "identity", color = NA) +
xlab("Household Income Bin") +
ylab("") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1)) +
ggtitle("Do You Have Emergency Funds That Could Cover 3 Months' Expenses?") +
labs(caption = "Graph created by @JosephPolitano using Federal Reserve data", subtitle = "Responses by Household Income, Weighted, 2021") +
theme_economist() +
scale_fill_economist(name="")
Emergency_Expenses_2021_Graph <- ggplot(Emergency_Expenses21, aes(x = ppinc7,pct/100, fill = EF1))+
geom_bar(stat = "identity", color = NA) +
xlab("Household Income Bin") +
ylab("") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1)) +
ggtitle("Do You Have Emergency Funds That Could Cover 3 Months' Expenses?") +
labs(caption = "Graph created by @JosephPolitano using Federal Reserve data", subtitle = "Responses by Household Income, Weighted, 2021") +
theme_economist() +
scale_fill_economist(name="")
ggsave(dpi = "retina",plot = Emergency_Expenses_2021_Graph, "2021 SHED Emergency Funds.png", type = "cairo-png") #CAIRO GETS RID OF THE ANTI ALIASING ISSUE
ggsave(dpi = "retina",plot = Emergency_Expenses_2019_Graph, "2019 SHED Emergency Funds.png", type = "cairo-png") #CAIRO GETS RID OF THE ANTI ALIASING ISSUE
Emergency_Expenses21 <- crosstab(df = SHED_2021, x = ppinc7, y = EF1, weight = weight,format = "long") #taking crosstabs of EF1 "do you have an emergency fund of 3 months worth of expenses" and ppinc7 "household income" (the codebook was changed for 2021)
Emergency_Expenses20 <- crosstab(df = SHED_2020, x = ppincimp, y = EF1, weight = weight,format = "long") #taking crosstabs of EF1 "do you have an emergency fund of 3 months worth of expenses" and ppinc "household income"
Emergency_Expenses_2020
Emergency_Expenses19 <- crosstab(df = SHED_2019, x = ppincimp, y = EF1, weight = weight,format = "long") #taking crosstabs of EF1 "do you have an emergency fund of 3 months worth of expenses" and ppinc "household income"
levels(Emergency_Expenses21$ppinc7) <- list("<10k" ="Less than $10,000", #renaming household income so it fits on the chart
"25k" = "$10,000 to $24,999",
"50k" = "$25,000 to $49,999",
"75k" = "$50,000 to $74,999",
"100k" = "$75,000 to $99,999",
"150k" = "$100,000 to $149,999",
"150k+" = "$150,000 or more")
levels(Emergency_Expenses21$EF1) <- list("No" = "No","Yes"="Yes") #renaming and reordering the answers
levels(Emergency_Expenses20$ppincimp) <- list("<5k" ="Less than $5,000", #renaming household income so it fits on the chart
"7k" = "$5,000 to $7,499",
"10k" = "$7,500 to $9,999",
"12.5k" = "$10,000 to $12,499",
"15k" = "$12,500 to $14,999",
"20k" = "$15,000 to $19,999",
"25k" = "$20,000 to $24,999",
"30k" = "$25,000 to $29,999",
"35k" = "$30,000 to $34,999",
"40k" = "$35,000 to $39,999",
"50k" = "$40,000 to $49,999",
"60k" = "$50,000 to $59,999",
"75k" = "$60,000 to $74,999",
"85k" = "$75,000 to $84,999",
"100k" = "$85,000 to $99,999",
"125k" = "$100,000 to $124,999",
"150k" = "$125,000 to $149,999",
"175k" = "$150,000 to $174,999",
"200k" = "$175,000 to $199,999",
"250k" = "$200,000 to $249,999",
">250k" = "$250,000 or more")
levels(Emergency_Expenses20$EF1) <- list( "Refused to Answer" = "Refused","No" = "No","Yes"="Yes" #renaming and reordering the answers
)
levels(Emergency_Expenses19$ppincimp) <- list("<5k" ="Less than $5,000", #renaming household income so it fits on the chart
"7k" = "$5,000 to $7,499",
"10k" = "$7,500 to $9,999",
"12.5k" = "$10,000 to $12,499",
"15k" = "$12,500 to $14,999",
"20k" = "$15,000 to $19,999",
"25k" = "$20,000 to $24,999",
"30k" = "$25,000 to $29,999",
"35k" = "$30,000 to $34,999",
"40k" = "$35,000 to $39,999",
"50k" = "$40,000 to $49,999",
"60k" = "$50,000 to $59,999",
"75k" = "$60,000 to $74,999",
"85k" = "$75,000 to $84,999",
"100k" = "$85,000 to $99,999",
"125k" = "$100,000 to $124,999",
"150k" = "$125,000 to $149,999",
"175k" = "$150,000 to $174,999",
"200k" = "$175,000 to $199,999",
"250k" = "$200,000 to $249,999",
">250k" = "$250,000 or more")
levels(Emergency_Expenses19$EF1) <- list( "Refused to Answer" = "Refused","No" = "No","Yes"="Yes" #renaming and reordering the answers
)
Emergency_Expenses_2020_Graph <- ggplot(Emergency_Expenses20, aes(x = ppincimp,pct/100, fill = EF1))+
geom_bar(stat = "identity", color = NA) +
xlab("Household Income Bin") +
ylab("") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1)) +
ggtitle("Do You Have Emergency Funds That Could Cover 3 Months' Expenses?") +
labs(caption = "Graph created by @JosephPolitano using Federal Reserve data", subtitle = "Responses by Household Income, Weighted, 2020") +
theme_economist() +
scale_fill_economist(name="")
Emergency_Expenses_2019_Graph <- ggplot(Emergency_Expenses19, aes(x = ppincimp,pct/100, fill = EF1))+
geom_bar(stat = "identity", color = NA) +
xlab("Household Income Bin") +
ylab("") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1)) +
ggtitle("Do You Have Emergency Funds That Could Cover 3 Months' Expenses?") +
labs(caption = "Graph created by @JosephPolitano using Federal Reserve data", subtitle = "Responses by Household Income, Weighted, 2019") +
theme_economist() +
scale_fill_economist(name="")
Emergency_Expenses_2021_Graph <- ggplot(Emergency_Expenses21, aes(x = ppinc7,pct/100, fill = EF1))+
geom_bar(stat = "identity", color = NA) +
xlab("Household Income Bin") +
ylab("") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1)) +
ggtitle("Do You Have Emergency Funds That Could Cover 3 Months' Expenses?") +
labs(caption = "Graph created by @JosephPolitano using Federal Reserve data", subtitle = "Responses by Household Income, Weighted, 2021") +
theme_economist() +
scale_fill_economist(name="")
Emergency_Expenses_19_Borrow <- crosstab(df = SHED_2019, x = ppincimp, y = EF2, weight = weight,format = "long") #taking crosstabs of EF1 "could you borrow or sell enough to cover 3 months of expenses" and ppinc "household income"
levels(Emergency_Expenses_19_Borrow$ppincimp) <- list("<5k" ="Less than $5,000", #renaming household income so it fits on the chart
"7k" = "$5,000 to $7,499",
"10k" = "$7,500 to $9,999",
"12.5k" = "$10,000 to $12,499",
"15k" = "$12,500 to $14,999",
"20k" = "$15,000 to $19,999",
"25k" = "$20,000 to $24,999",
"30k" = "$25,000 to $29,999",
"35k" = "$30,000 to $34,999",
"40k" = "$35,000 to $39,999",
"50k" = "$40,000 to $49,999",
"60k" = "$50,000 to $59,999",
"75k" = "$60,000 to $74,999",
"85k" = "$75,000 to $84,999",
"100k" = "$85,000 to $99,999",
"125k" = "$100,000 to $124,999",
"150k" = "$125,000 to $149,999",
"175k" = "$150,000 to $174,999",
"200k" = "$175,000 to $199,999",
"250k" = "$200,000 to $249,999",
">250k" = "$250,000 or more")
levels(Emergency_Expenses_19_Borrow$EF2) <- list( "Refused to Answer" = "Refused","No" = "No","Yes"="Yes" #renaming and reordering the answers
)
ggsave(dpi = "retina",plot = Emergency_Expenses_2019_Graph, "2019 SHED Emergency Funds.png", type = "cairo-png") #CAIRO GETS RID OF THE ANTI ALIASING ISSUE
ggsave(dpi = "retina",plot = Emergency_Expenses_2020_Graph, "2020 SHED Emergency Funds.png", type = "cairo-png") #CAIRO GETS RID OF THE ANTI ALIASING ISSUE
ggsave(dpi = "retina",plot = Emergency_Expenses_2021_Graph, "2021 SHED Emergency Funds.png", type = "cairo-png") #CAIRO GETS RID OF THE ANTI ALIASING ISSUE
ggplot(Emergency_Expenses20, aes(x = ppincimp,pct/100, fill = EF1))+
geom_bar(stat = "identity", color = NA) +
xlab("Household Income Bin") +
ylab("") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1)) +
ggtitle("Do You Have Emergency Funds That Could Cover 3 Months' Expenses?") +
labs(caption = "Graph created by @JosephPolitano using Federal Reserve data", subtitle = "Responses by Household Income, Weighted, 2020") +
theme_economist() +
scale_fill_economist(name="")
SHED_2020 <- read.csv("https://raw.githubusercontent.com/Miles-byte/Apricitas/main/Household%20Illiquidity/SHED%20Data%202020.csv")
Emergency_Expenses21 <- crosstab(df = SHED_2021, x = ppinc7, y = EF1, weight = weight,format = "long") #taking crosstabs of EF1 "do you have an emergency fund of 3 months worth of expenses" and ppinc7 "household income" (the codebook was changed for 2021)
Emergency_Expenses20 <- crosstab(df = SHED_2020, x = ppincimp, y = EF1, weight = weight,format = "long") #taking crosstabs of EF1 "do you have an emergency fund of 3 months worth of expenses" and ppinc "household income"
Emergency_Expenses_2020
Emergency_Expenses19 <- crosstab(df = SHED_2019, x = ppincimp, y = EF1, weight = weight,format = "long") #taking crosstabs of EF1 "do you have an emergency fund of 3 months worth of expenses" and ppinc "household income"
levels(Emergency_Expenses21$ppinc7) <- list("<10k" ="Less than $10,000", #renaming household income so it fits on the chart
"25k" = "$10,000 to $24,999",
"50k" = "$25,000 to $49,999",
"75k" = "$50,000 to $74,999",
"100k" = "$75,000 to $99,999",
"150k" = "$100,000 to $149,999",
"150k+" = "$150,000 or more")
levels(Emergency_Expenses21$EF1) <- list("No" = "No","Yes"="Yes") #renaming and reordering the answers
levels(Emergency_Expenses20$ppincimp) <- list("<5k" ="Less than $5,000", #renaming household income so it fits on the chart
"7k" = "$5,000 to $7,499",
"10k" = "$7,500 to $9,999",
"12.5k" = "$10,000 to $12,499",
"15k" = "$12,500 to $14,999",
"20k" = "$15,000 to $19,999",
"25k" = "$20,000 to $24,999",
"30k" = "$25,000 to $29,999",
"35k" = "$30,000 to $34,999",
"40k" = "$35,000 to $39,999",
"50k" = "$40,000 to $49,999",
"60k" = "$50,000 to $59,999",
"75k" = "$60,000 to $74,999",
"85k" = "$75,000 to $84,999",
"100k" = "$85,000 to $99,999",
"125k" = "$100,000 to $124,999",
"150k" = "$125,000 to $149,999",
"175k" = "$150,000 to $174,999",
"200k" = "$175,000 to $199,999",
"250k" = "$200,000 to $249,999",
">250k" = "$250,000 or more")
levels(Emergency_Expenses20$EF1) <- list( "Refused to Answer" = "Refused","No" = "No","Yes"="Yes" #renaming and reordering the answers
)
levels(Emergency_Expenses19$ppincimp) <- list("<5k" ="Less than $5,000", #renaming household income so it fits on the chart
"7k" = "$5,000 to $7,499",
"10k" = "$7,500 to $9,999",
"12.5k" = "$10,000 to $12,499",
"15k" = "$12,500 to $14,999",
"20k" = "$15,000 to $19,999",
"25k" = "$20,000 to $24,999",
"30k" = "$25,000 to $29,999",
"35k" = "$30,000 to $34,999",
"40k" = "$35,000 to $39,999",
"50k" = "$40,000 to $49,999",
"60k" = "$50,000 to $59,999",
"75k" = "$60,000 to $74,999",
"85k" = "$75,000 to $84,999",
"100k" = "$85,000 to $99,999",
"125k" = "$100,000 to $124,999",
"150k" = "$125,000 to $149,999",
"175k" = "$150,000 to $174,999",
"200k" = "$175,000 to $199,999",
"250k" = "$200,000 to $249,999",
">250k" = "$250,000 or more")
levels(Emergency_Expenses19$EF1) <- list( "Refused to Answer" = "Refused","No" = "No","Yes"="Yes" #renaming and reordering the answers
)
Emergency_Expenses_2020_Graph <- ggplot(Emergency_Expenses20, aes(x = ppincimp,pct/100, fill = EF1))+
geom_bar(stat = "identity", color = NA) +
xlab("Household Income Bin") +
ylab("") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1)) +
ggtitle("Do You Have Emergency Funds That Could Cover 3 Months' Expenses?") +
labs(caption = "Graph created by @JosephPolitano using Federal Reserve data", subtitle = "Responses by Household Income, Weighted, 2020") +
theme_economist() +
scale_fill_economist(name="")
Emergency_Expenses_2019_Graph <- ggplot(Emergency_Expenses19, aes(x = ppincimp,pct/100, fill = EF1))+
geom_bar(stat = "identity", color = NA) +
xlab("Household Income Bin") +
ylab("") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1)) +
ggtitle("Do You Have Emergency Funds That Could Cover 3 Months' Expenses?") +
labs(caption = "Graph created by @JosephPolitano using Federal Reserve data", subtitle = "Responses by Household Income, Weighted, 2019") +
theme_economist() +
scale_fill_economist(name="")
Emergency_Expenses_2021_Graph <- ggplot(Emergency_Expenses21, aes(x = ppinc7,pct/100, fill = EF1))+
geom_bar(stat = "identity", color = NA) +
xlab("Household Income Bin") +
ylab("") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1)) +
ggtitle("Do You Have Emergency Funds That Could Cover 3 Months' Expenses?") +
labs(caption = "Graph created by @JosephPolitano using Federal Reserve data", subtitle = "Responses by Household Income, Weighted, 2021") +
theme_economist() +
scale_fill_economist(name="")
Emergency_Expenses_19_Borrow <- crosstab(df = SHED_2019, x = ppincimp, y = EF2, weight = weight,format = "long") #taking crosstabs of EF1 "could you borrow or sell enough to cover 3 months of expenses" and ppinc "household income"
levels(Emergency_Expenses_19_Borrow$ppincimp) <- list("<5k" ="Less than $5,000", #renaming household income so it fits on the chart
"7k" = "$5,000 to $7,499",
"10k" = "$7,500 to $9,999",
"12.5k" = "$10,000 to $12,499",
"15k" = "$12,500 to $14,999",
"20k" = "$15,000 to $19,999",
"25k" = "$20,000 to $24,999",
"30k" = "$25,000 to $29,999",
"35k" = "$30,000 to $34,999",
"40k" = "$35,000 to $39,999",
"50k" = "$40,000 to $49,999",
"60k" = "$50,000 to $59,999",
"75k" = "$60,000 to $74,999",
"85k" = "$75,000 to $84,999",
"100k" = "$85,000 to $99,999",
"125k" = "$100,000 to $124,999",
"150k" = "$125,000 to $149,999",
"175k" = "$150,000 to $174,999",
"200k" = "$175,000 to $199,999",
"250k" = "$200,000 to $249,999",
">250k" = "$250,000 or more")
levels(Emergency_Expenses_19_Borrow$EF2) <- list( "Refused to Answer" = "Refused","No" = "No","Yes"="Yes" #renaming and reordering the answers
)
ggsave(dpi = "retina",plot = Emergency_Expenses_2019_Graph, "2019 SHED Emergency Funds.png", type = "cairo-png") #CAIRO GETS RID OF THE ANTI ALIASING ISSUE
ggsave(dpi = "retina",plot = Emergency_Expenses_2020_Graph, "2020 SHED Emergency Funds.png", type = "cairo-png") #CAIRO GETS RID OF THE ANTI ALIASING ISSUE
ggsave(dpi = "retina",plot = Emergency_Expenses_2021_Graph, "2021 SHED Emergency Funds.png", type = "cairo-png") #CAIRO GETS RID OF THE ANTI ALIASING ISSUE
Emergency_Expenses21 <- crosstab(df = SHED_2021, x = ppinc7, y = EF1, weight = weight,format = "long") #taking crosstabs of EF1 "do you have an emergency fund of 3 months worth of expenses" and ppinc7 "household income" (the codebook was changed for 2021)
levels(Emergency_Expenses21$ppinc7) <- list("<10k" ="Less than $10,000", #renaming household income so it fits on the chart
"10k-25k" = "$10,000 to $24,999",
"25k-50k" = "$25,000 to $49,999",
"50k-75k" = "$50,000 to $74,999",
"75k-100k" = "$75,000 to $99,999",
"100k-150k" = "$100,000 to $149,999",
"150k+" = "$150,000 or more")
ggplot(Emergency_Expenses21, aes(x = ppinc7,pct/100, fill = EF1))+
geom_bar(stat = "identity", color = NA) +
xlab("Household Income Bin") +
ylab("") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1)) +
ggtitle("Do You Have Emergency Funds That Could Cover 3 Months' Expenses?") +
labs(caption = "Graph created by @JosephPolitano using Federal Reserve data", subtitle = "Responses by Household Income, Weighted, 2021") +
theme_economist() +
scale_fill_economist(name="")
gsub("Less than $5,000","<10k",SHED_2019$ppincimp)
gsub("$5,000 to $7,499","<10k",SHED_2019$ppincimp)
gsub("$7,500 to $9,999","<10k",SHED_2019$ppincimp)
gsub("$10,000 to $12,499","10k-25k",SHED_2019$ppincimp)
gsub("$12,500 to $14,999","10k-25k",SHED_2019$ppincimp)
gsub("$15,000 to $19,999","10k-25k",SHED_2019$ppincimp)
gsub("$20,000 to $24,999","10k-25k",SHED_2019$ppincimp)
gsub("$25,000 to $29,999","25k-50k",SHED_2019$ppincimp)
gsub("$30,000 to $34,999","25k-50k",SHED_2019$ppincimp)
gsub("$35,000 to $39,999","25k-50k",SHED_2019$ppincimp)
gsub("$40,000 to $49,999","25k-50k",SHED_2019$ppincimp)
gsub("$50,000 to $59,999","$50,000 to $74,999",SHED_2019$ppincimp)
gsub("$60,000 to $74,999","$50,000 to $74,999",SHED_2019$ppincimp)
gsub("$75,000 to $84,999","$75,000 to $99,999",SHED_2019$ppincimp)
gsub("$85,000 to $99,999","$75,000 to $99,999",SHED_2019$ppincimp)
gsub("$100,000 to $124,999","$100,000 to $149,999",SHED_2019$ppincimp)
gsub("$125,000 to $149,999","$100,000 to $149,999",SHED_2019$ppincimp)
gsub("$150,000 to $174,999","$150,000 or more",SHED_2019$ppincimp)
gsub("$175,000 to $199,999","$150,000 or more",SHED_2019$ppincimp)
gsub("$200,000 to $249,999","$150,000 or more",SHED_2019$ppincimp)
gsub("$250,000 or more","$150,000 or more",SHED_2019$ppincimp)
Emergency_Expenses19 <- crosstab(df = SHED_2019, x = ppincimp, y = EF1, weight = weight,format = "long") #taking crosstabs of EF1 "do you have an emergency fund of 3 months worth of expenses" and ppinc "household income"
ggplot(Emergency_Expenses19, aes(x = ppincimp,pct/100, fill = EF1))+
geom_bar(stat = "identity", color = NA) +
xlab("Household Income Bin") +
ylab("") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1)) +
ggtitle("Do You Have Emergency Funds That Could Cover 3 Months' Expenses?") +
labs(caption = "Graph created by @JosephPolitano using Federal Reserve data", subtitle = "Responses by Household Income, Weighted, 2019") +
theme_economist() +
scale_fill_economist(name="")
gsub("Less than $5,000","<10k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("Less than $5,000","<10k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$5,000 to $7,499","<10k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$7,500 to $9,999","<10k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$10,000 to $12,499","10k-25k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$12,500 to $14,999","10k-25k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$15,000 to $19,999","10k-25k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$20,000 to $24,999","10k-25k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$25,000 to $29,999","25k-50k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$30,000 to $34,999","25k-50k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$35,000 to $39,999","25k-50k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$40,000 to $49,999","25k-50k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$50,000 to $59,999","$50,000 to $74,999",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$60,000 to $74,999","$50,000 to $74,999",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$75,000 to $84,999","$75,000 to $99,999",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$85,000 to $99,999","$75,000 to $99,999",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$100,000 to $124,999","$100,000 to $149,999",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$125,000 to $149,999","$100,000 to $149,999",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$150,000 to $174,999","$150,000 or more",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$175,000 to $199,999","$150,000 or more",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$200,000 to $249,999","$150,000 or more",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$250,000 or more","$150,000 or more",SHED_2019$ppincimp)
ggplot(Emergency_Expenses19, aes(x = ppincimp,pct/100, fill = EF1))+
geom_bar(stat = "identity", color = NA) +
xlab("Household Income Bin") +
ylab("") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1)) +
ggtitle("Do You Have Emergency Funds That Could Cover 3 Months' Expenses?") +
labs(caption = "Graph created by @JosephPolitano using Federal Reserve data", subtitle = "Responses by Household Income, Weighted, 2019") +
theme_economist() +
scale_fill_economist(name="")
Emergency_Expenses19 <- crosstab(df = SHED_2019, x = ppincimp, y = EF1, weight = weight,format = "long") #taking crosstabs of EF1 "do you have an emergency fund of 3 months worth of expenses" and ppinc "household income"
ggplot(Emergency_Expenses19, aes(x = ppincimp,pct/100, fill = EF1))+
geom_bar(stat = "identity", color = NA) +
xlab("Household Income Bin") +
ylab("") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1)) +
ggtitle("Do You Have Emergency Funds That Could Cover 3 Months' Expenses?") +
labs(caption = "Graph created by @JosephPolitano using Federal Reserve data", subtitle = "Responses by Household Income, Weighted, 2019") +
theme_economist() +
scale_fill_economist(name="")
SHED_2019$ppincimp <- gsub("Less than $5,000","<10k",SHED_2019$ppincimp)
View(Emergency_Expenses19)
Emergency_Expenses19 <- crosstab(df = SHED_2019, x = ppincimp, y = EF1, weight = weight,format = "long") #taking crosstabs of EF1 "do you have an emergency fund of 3 months worth of expenses" and ppinc "household income"
View(Emergency_Expenses19)
View(SHED_2019)
SHED_2019 <- read.csv("https://raw.githubusercontent.com/Miles-byte/Apricitas/main/Household%20Illiquidity/SHED%20Data%202019.csv")
SHED_2019$ppincimp <- gsub("Less than $5,000","<10k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$5,000 to $7,499","<10k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$7,500 to $9,999","<10k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$10,000 to $12,499","10k-25k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$12,500 to $14,999","10k-25k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$15,000 to $19,999","10k-25k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$20,000 to $24,999","10k-25k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$25,000 to $29,999","25k-50k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$30,000 to $34,999","25k-50k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$35,000 to $39,999","25k-50k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$40,000 to $49,999","25k-50k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$50,000 to $59,999","$50,000 to $74,999",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$60,000 to $74,999","$50,000 to $74,999",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$75,000 to $84,999","$75,000 to $99,999",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$85,000 to $99,999","$75,000 to $99,999",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$100,000 to $124,999","$100,000 to $149,999",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$125,000 to $149,999","$100,000 to $149,999",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$150,000 to $174,999","$150,000 or more",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$175,000 to $199,999","$150,000 or more",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$200,000 to $249,999","$150,000 or more",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$250,000 or more","$150,000 or more",SHED_2019$ppincimp)
SHED_2019$ppincimp
subset(SHED_2019, columns = c(ppincimp, EF1, weight))
select(SHED_2019, columns = c(ppincimp, EF1, weight))
SHED_2019 <- select(SHED_2019, columns = c(ppincimp, EF1, weight))
SHED_2019 <- read.csv("https://raw.githubusercontent.com/Miles-byte/Apricitas/main/Household%20Illiquidity/SHED%20Data%202019.csv")
SHED_2019 <- select(SHED_2019, ppincimp, EF1, weight)
SHED_2019$ppincimp <- gsub("$250,000 or more","$150,000 or more",SHED_2019$ppincimp)
View(SHED_2019)
?gsub()
SHED_2019$ppincimp <- gsub(SHED_2019$ppincimp,"$250,000 or more","$150,000 or more")
SHED_2019$ppincimp <- gsub("$250,000 or more","$150,000 or more",SHED_2019$ppincimp,)
SHED_2019$test <- gsub("$250,000 or more","$150,000 or more",SHED_2019$ppincimp,)
View(SHED_2019)
SHED_2019 <- read.csv("https://raw.githubusercontent.com/Miles-byte/Apricitas/main/Household%20Illiquidity/SHED%20Data%202019.csv")
SHED_2019 <- select(SHED_2019, ppincimp, EF1, weight)
SHED_2019$ppincimp <- gsub("Less than $5,000","<10k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$5,000 to $7,499","<10k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$7,500 to $9,999","<10k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$10,000 to $12,499","10k-25k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$12,500 to $14,999","10k-25k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$15,000 to $19,999","10k-25k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$20,000 to $24,999","10k-25k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$25,000 to $29,999","25k-50k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$30,000 to $34,999","25k-50k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$35,000 to $39,999","25k-50k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$40,000 to $49,999","25k-50k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$50,000 to $59,999","$50,000 to $74,999",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$60,000 to $74,999","$50,000 to $74,999",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$75,000 to $84,999","$75,000 to $99,999",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$85,000 to $99,999","$75,000 to $99,999",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$100,000 to $124,999","$100,000 to $149,999",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$125,000 to $149,999","$100,000 to $149,999",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$150,000 to $174,999","$150,000 or more",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$175,000 to $199,999","$150,000 or more",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$200,000 to $249,999","$150,000 or more",SHED_2019$ppincimp)
View(SHED_2019)
SHED_2019$ppincimp <- gsub("$25,000 to $29,999","25k-50k",SHED_2019$ppincimp)
pacman::p_load(cli,remotes,magick,cowplot,knitr,ghostscript,png,httr,grid,usethis,pacman,rio,ggplot2,ggthemes,quantmod,dplyr,data.table,lubridate,forecast,gifski,av,tidyr,gganimate,zoo,RCurl,Cairo,datetime,stringr,pollster,tidyquant,hrbrthemes,plotly,fredr)
DFA <- read.csv("https://raw.githubusercontent.com/Miles-byte/Apricitas/main/Understanding%20Americans'%20Excess%20Savings/dfa-income-levels-detail.csv")
DFA$Category <- gsub("pct99to100", "Top 1%", DFA$Category)
SHED_2019$ppincimp <- gsub("$25,000 to $29,999","25k-50k",SHED_2019$ppincimp)
Emergency_Expenses19 <- crosstab(df = SHED_2019, x = ppincimp, y = EF1, weight = weight,format = "long") #taking crosstabs of EF1 "do you have an emergency fund of 3 months worth of expenses" and ppinc "household income"
View(SHED_2019)
SHED_2019$EF1 <- gsub("No","FUCK YOU",SHED_2019$EF1)
SHED_2019$ppincimp <- gsub("$10,000 to $12,499","10k-25k",SHED_2019$ppincimp)
View(SHED_2019)
SHED_2019$ppincimp <- gsub("$","",SHED_2019$ppincimp)
SHED_2019$ppincimp <- as.character(SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$","",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("","d",SHED_2019$ppincimp)
SHED_2019 <- read.csv("https://raw.githubusercontent.com/Miles-byte/Apricitas/main/Household%20Illiquidity/SHED%20Data%202019.csv")
SHED_2019 <- select(SHED_2019, ppincimp, EF1, weight)
SHED_2019$ppincimp <- as.character.default(SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("Less than $5,000","<10k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$5,000 to $7,499","<10k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$7,500 to $9,999","<10k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$10,000 to $12,499","10k-25k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$12,500 to $14,999","10k-25k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$15,000 to $19,999","10k-25k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("Lessthan$5,000","<10k",SHED_2019$ppincimp)
str_replace_all(SHED_2019$ppincimp,"Less than $5,000","<10k")
SHED_2019$ppincimp[1]
str_replace_all(SHED_2019$ppincimp,SHED_2019$ppincimp[1],"<10k")
SHED_2019$ppincimp <- gsub("Less than $5,000","<10k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$5,000 to $7,499","<10k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$7,500 to $9,999","<10k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$10,000 to $12,499","10k-25k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$12,500 to $14,999","10k-25k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$15,000 to $19,999","10k-25k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$20,000 to $24,999","10k-25k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$25,000 to $29,999","25k-50k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$30,000 to $34,999","25k-50k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$35,000 to $39,999","25k-50k",SHED_2019$ppincimp)
SHED_2019$ppincimp <- gsub("$40,000 to $49,999","25k-50k",SHED_2019$ppincimp)
S
SHED_2020 <- read.csv("https://raw.githubusercontent.com/Miles-byte/Apricitas/main/Household%20Illiquidity/SHED%20Data%202020.csv")
SHED_2020$ppincimp <- gsub("Less than $5,000","<10k",SHED_2020$ppincimp)
SHED_2020 <- select(SHED_2020, ppincimp, EF1, weight)
View(SHED_2020)
SHED_2020$ppincimp <- gsub(SHED_2020$ppincimp[1],"<10k",SHED_2020$ppincimp)
SHED_2020$ppincimp <- gsub(SHED_2020$ppincimp[1],"FUCK YOU",SHED_2020$ppincimp)
SHED_2020$ppincimp <- gsub("Less than $5,000","FUCK YOU",SHED_2020$ppincimp)
levels(Emergency_Expenses21$ppinc7) <- list("<10k" ="Less than $5,000", #renaming household income so it fits on the chart
"10k-25k" = "$10,000 to $24,999",
"25k-50k" = "$25,000 to $49,999",
"50k-75k" = "$50,000 to $74,999",
"75k-100k" = "$75,000 to $99,999",
"100k-150k" = "$100,000 to $149,999",
"150k+" = "$150,000 or more")
levels(Emergency_Expenses20$ppinc7) <- list("<10k" ="Less than $5,000", #renaming household income so it fits on the chart
"10k-25k" = "$10,000 to $24,999",
"25k-50k" = "$25,000 to $49,999",
"50k-75k" = "$50,000 to $74,999",
"75k-100k" = "$75,000 to $99,999",
"100k-150k" = "$100,000 to $149,999",
"150k+" = "$150,000 or more")
levels(Emergency_Expenses20$ppincimp) <- list("<10k" ="Less than $5,000", #renaming household income so it fits on the chart
"10k-25k" = "$10,000 to $24,999",
"25k-50k" = "$25,000 to $49,999",
"50k-75k" = "$50,000 to $74,999",
"75k-100k" = "$75,000 to $99,999",
"100k-150k" = "$100,000 to $149,999",
"150k+" = "$150,000 or more")
levels(SHED_2020$ppincimp) <- list("<10k" ="Less than $5,000", #renaming household income so it fits on the chart
"10k-25k" = "$10,000 to $24,999",
"25k-50k" = "$25,000 to $49,999",
"50k-75k" = "$50,000 to $74,999",
"75k-100k" = "$75,000 to $99,999",
"100k-150k" = "$100,000 to $149,999",
"150k+" = "$150,000 or more")
View(SHED_2020)
str_replace(SHED_2020$ppincimp,"lESS THAN $5,000","fuck you")
str_replace(SHED_2020$ppincimp,"Less than $5,000","fuck you")
str_replace(SHED_2020$ppincimp,"Less than $5,000","fuck you")
