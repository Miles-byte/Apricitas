US_BRAZIL_HS10_IMPORTS_QUANTITY_BULK <- getCensus(
  name = "timeseries/intltrade/imports/hs",
  vars = c("CON_VAL_YR", "I_COMMODITY","CTY_CODE", "CTY_NAME","I_COMMODITY_LDESC","COMM_LVL","GEN_QY1_YR"), 
  time = "2024-12",
  COMM_LVL = "HS10",
  #I_COMMODITY = "????",
  #I_COMMODITY = "*",#ALL COuntries
  #CTY_CODE = "0201", #TOTAL
  CTY_NAME = "BRAZIL",
)


codes <- c(
  "08012100",
  "27079920",
  "27102005",
  "27131200",
  "47041100",
  "20083035",
  "27079940",
  "27102010",
  "27132000",
  "47041900",
  "20091100",
  "27079951",
  "27102015",
  "27139000",
  "47042100",
  "20091225",
  "27079955",
  "27102025",
  "27141000",
  "47042900",
  "20091245",
  "27079959",
  "27109100",
  "27149000",
  "47050000",
  "25251000",
  "27079990",
  "27109905",
  "27150000",
  "47061000",
  "26011100",
  "27081000",
  "27109910",
  "27160000",
  "47062000",
  "26011200",
  "27082000",
  "27109916",
  "28046910",
  "47063000",
  "26090000",
  "27090010",
  "27109921",
  "28046950",
  "47069100",
  "27011100",
  "27090020",
  "27109931",
  "28152000",
  "47069201",
  "27011200",
  "27101215",
  "27109932",
  "28182000",
  "47069301",
  "27011900",
  "27101218",
  "27109939",
  "28259020",
  "56072100",
  "27012000",
  "27101225",
  "27109945",
  "28273925",
  "68029900",
  "27021000",
  "27101245",
  "27109990",
  "29031905",
  "71069110",
  "27022000",
  "27101290",
  "27111100",
  "29031910",
  "71081210",
  "27030000",
  "27101906",
  "27111200",
  "29031930",
  "72011000",
  "27040000",
  "27101911",
  "27111300",
  "29031960",
  "72012000",
  "27050000",
  "27101916",
  "27111400",
  "31051000",
  "72015030",
  "27060000",
  "27101924",
  "27111900",
  "31052000",
  "72015060",
  "27071000",
  "27101925",
  "27112100",
  "31056000",
  "72026000",
  "27072000",
  "27101926",
  "27112900",
  "44072902",
  "72029340",
  "27073000",
  "27101930",
  "27121000",
  "47020000",
  "72029380",
  "27074000",
  "27101935",
  "27122000",
  "47031100",
  "72031000",
  "27075000",
  "27101940",
  "27129010",
  "47031900",
  "72039000",
  "27079100",
  "27101945",
  "27129020",
  "47032100",
  "80020000",
  "27079910",
  "27101990",
  "27131100",
  "47032900"
)

I_COMMODITY_4 <- getCensus(
  name = "timeseries/intltrade/imports/hs",
  vars = c("CON_VAL_YR", "I_COMMODITY","CTY_CODE", "CTY_NAME","I_COMMODITY_LDESC","COMM_LVL","GEN_QY1_YR"), 
  time = "2024-12",
  COMM_LVL = "HS4",
  #I_COMMODITY = "????",
  #I_COMMODITY = "*",#ALL COuntries
  #CTY_CODE = "0201", #TOTAL
  CTY_NAME = "TOTAL FOR ALL COUNTRIES",
)

I_COMMODITY_4 <- I_COMMODITY_4 %>%
  mutate(I_COMMODITY = as.character(I_COMMODITY)) %>%
  mutate(I_COMMODITY = if_else(nchar(I_COMMODITY) == 3, paste0("0", I_COMMODITY), I_COMMODITY))


US_BRAZIL_HS10_IMPORTS <- US_BRAZIL_HS10_IMPORTS_QUANTITY_BULK %>%
  mutate(I_COMMODITY = as.character(I_COMMODITY)) %>%
  mutate(I_COMMODITY = if_else(nchar(I_COMMODITY) == 9, paste0("0", I_COMMODITY), I_COMMODITY)) %>%
  mutate(I_COMMODITY_8 = substr(I_COMMODITY, 1, 8)) %>%
  mutate(I_COMMODITY_6 = substr(I_COMMODITY, 1, 6)) %>%
  mutate(I_COMMODITY_4 = substr(I_COMMODITY, 1, 4)) %>%
  #mutate(I_COMMODITY_8 = substr(I_COMMODITY, 1, 8)) %>%
  #mutate(I_COMMODITY_6 = substr(I_COMMODITY, 1, 6)) %>%
  #mutate(I_COMMODITY_4 = substr(I_COMMODITY, 1, 4)) %>%
  mutate(tariff = !I_COMMODITY_8 %in% codes) %>%
  mutate(tariff = if_else(str_starts(I_COMMODITY, "88"), FALSE, tariff)) %>%
  mutate(tariff = if_else(I_COMMODITY %in% I_COMMODITY %in% c("4009120020", "4009220020", "4009320020", "4009420020", "4013100010", 
                                                              "4013100020", "4016996010", "8409911040", "8409991040", "8413919010", 
                                                              "8414308030", "8414596540", "8431100090", "8482105044", "8482105048", 
                                                              "8482200020", "8482200030", "8482200040", "8482200061", "8482200070", 
                                                              "8482200081", "8483101030", "8511100000", "8511300040", "8511300080", 
                                                              "8511906020", "8511906040", "8525601010", "8536410005", "8539100010", 
                                                              "8539100050", "8707100020", "8707100040", "8707905020", "8707905040", 
                                                              "8707905060", "8707905080", "9029204080") & CTY_NAME != "MEXICO" & CTY_NAME != "CANADA", FALSE, tariff)) %>% #10 digit HS codes for excluded car parts
  mutate(tariff = if_else(I_COMMODITY_8 %in% c(
    "40111010", "40111050",
    "40112010", "40121940", "40122060",
    "70072151", "73202010", "83021000", "84073100", "84082020",
    "84099110", "84133010", "84133090", "84139110", "84139190",
    "84143080", "84145930", "84145965", "84148005", "84152000",
    "84212300", "84213200", "84254900", "84311000", "84821010",
    "84821050", "84821050", "84822000", "84822000", "84822000",
    "84822000", "84822000", "84822000", "84825000", "84831010",
    "84831030", "85013200", "85013300", "85014000", "85015100",
    "85015200", "85071000", "85079040", "85079080",
    "85111000", "85112000", "85113000", "85113000", "85114000",
    "85115000", "85118020", "85119060", "85119060", "85122020",
    "85122040", "85123000", "85124020", "85124040", "85129020",
    "85129060", "85129070", "85198120", "85269010", "85364100",
    "85391000", "85391000", "85443000", "87060025", "87060005",
    "87060015", "87071000", "87079050", "87079050", "87079050",
    "87081030", "87082100", "87082200", "87082900", "87083000",
    "87084011", "87084070", "87084075", "87085000", "87088000",
    "87089100", "87089360", "87089375", "87089400", "87089580",
    "87089953", "87089955", "87089958", "87089968", "87169050",
    "90292040"
  ) & CTY_NAME != "MEXICO" & CTY_NAME != "CANADA", FALSE, tariff)) %>% #car parts
  mutate(tariff = if_else(I_COMMODITY_8 %in% c("87032201", "87032301", "87032401", "87033101", "87033201", "87033301", 
                                               "87034000", "87035000", "87036000", "87037000", "87038000", "87039001", 
                                               "87042101", "87043101", "87044100", "87045100", "87046000"), FALSE, tariff)) %>% #car exclusion
  mutate(tariff = if_else(I_COMMODITY %in% c(
    7601103000, 7601106030, 7601106090, 7601203000, 7601206000, 7601209030,
    7601209045, 7601209060, 7601209075, 7601209080, 7601209085, 7601209095,
    7604101000, 7604103000, 7604105000, 7604210010, 7604210090, 7604291010,
    7604291090, 7604293030, 7604293060, 7604293090, 7604295020, 7604295050,
    7604295090, 7605110000, 7605190000, 7605210000, 7605290000, 7606113030,
    7606113060, 7606116000, 7606123015, 7606123025, 7606123035, 7606123045,
    7606123055, 7606123091, 7606123096, 7606126000, 7606913055, 7606913095,
    7606916055, 7606916095, 7606923025, 7606923035, 7606926055, 7606926095,
    7607113000, 7607116010, 7607116090, 7607119030, 7607119060, 7607119090,
    7607191000, 7607193000, 7607196000, 7607201000, 7607205000, 7608100030,
    7608100090, 7608200030, 7608200090, 7609000000, 7616995160, 7616995170,
    7610100010, 7610100020, 7610100030, 7610900020, 7610900040, 7610900060,
    7610900080, 7615102015, 7615102025, 7615103015, 7615103025, 7615105020,
    7615105040, 7615107125, 7615107130, 7615107155, 7615107180, 7615109100,
    7615200000, 7616109090, 7616991000, 7616995130, 7616995140, 7616995190
  ), FALSE, tariff)) %>% #ALUMINUM
  mutate(tariff = if_else(I_COMMODITY %in% c(
    7614105000, 7614902030, 7614902060, 7614904000, 7614905000, 8708103030,
    8708292130, 8302103000, 8302106030, 8302106060, 8302106090, 8302200000,
    8302303010, 8302303060, 8302413000, 8302416015, 8302416045, 8302416050,
    8302416080, 8302423010, 8302423015, 8302423065, 8302496035, 8302496045,
    8302496055, 8302496085, 8302500000, 8302603000, 8302609000, 8305100010,
    8305100050, 8306300000, 8414596590, 8415908025, 8415908045, 8415908085,
    8418998005, 8418998050, 8418998060, 8419901000, 8422900680, 8473302000,
    8473305100, 8479899596, 8481909060, 8481909085, 8486900000, 8487900040,
    8487900080, 8503009520, 8508700000, 8513902000, 8515902000, 8516905000,
    8516908050, 8517710000, 8517790000, 8529907300, 8529909760, 8536908585,
    8538100000, 8541900000, 8543908885, 8547900010, 8547900020, 8547900030,
    8547900040, 8708106010, 8708106050, 8708295160, 8708806590, 8708996890,
    8716805010, 8807300015, 8807300030, 8807300060, 9013908000, 9031909195,
    9401999081, 9403100020, 9403100040, 9403200011, 9403200016, 9403200017,
    9403200035, 9403200040, 9403200046, 9403200048, 9403200050, 9403200075,
    9403200078, 9403200082, 9403200086, 9403200090, 9403991040, 9403999010,
    9403999015, 9403999020, 9403999040, 9403999045, 9405992000, 9506114080,
    9506514000, 9506516000, 9506594040, 9506702090, 9506910010, 9506910020,
    9506910030, 9506990510, 9506990520, 9506990530, 9506991500, 9506992000,
    9506992580, 9506992800, 9506995500, 9506996080, 9507302000, 9507304000,
    9507306000, 9507308000, 9507906000, 9603908050, 6603908100
  ) & CTY_NAME != "CHINA", FALSE, tariff)) %>% #ALUMINUM DERIVATIVES
  mutate(tariff = if_else(I_COMMODITY %in% c(
    7206100000,7206900000,7207110000,7207120010,7207120050,7207190030,7207190090,7207200025,
    7207200045,7207200075,7207200090,7208101500,7208103000,7208106000,7208253000,7208256000,
    7208260030,7208260060,7208270040,7208270045,7208270060,7208360030,7208360060,7208370030,
    7208370060,7208380015,7208380030,7208380090,7208390020,7208390025,7208390030,7208390090,
    7208403030,7208403060,7208406030,7208406060,7208510030,7208510045,7208510060,7208520000,
    7208530000,7208540000,7208900000,7209150000,7209160040,7209160045,7209160060,7209160070,
    7209160091,7209170040,7209170045,7209170060,7209170070,7209170091,7209181530,7209181560,
    7209182520,7209182585,7209186020,7209186090,7209250000,7209260000,7209270000,7209280000,
    7209900000,7210110000,7210120000,7210200000,7210300030,7210300060,7210410000,7210490040,
    7210490045,7210490091,7210490095,7210500020,7210500090,7210610000,7210690000,7210703000,
    7210706030,7210706060,7210706090,7210901000,7210906000,7210909000,7211130000,7211140030,
    7211140045,7211140090,7211191500,7211192000,7211193000,7211194500,7211196000,7211197530,
    7211197560,7211197590,7211231500,7211232000,7211233000,7211234500,7211236030,7211236060,
    7211236090,7211292030,7211292090,7211294500,7211296030,7211296080,7211900000,7212100000,
    7212200000,7212301030,7212301090,7212303000,7212305000,7212401000,7212405000,7212500000,
    7212600000,7213100000,7213200010,7213200080,7213913011,7213913015,7213913020,7213913093,
    7213914500,7213916000,7213990030,7213990060,7213990090,7214100000,7214200000,7214300010,
    7214300080,7214910016,7214910020,7214910060,7214910090,7214990016,7214990021,7214990026,
    7214990031,7214990036,7214990040,7214990045,7214990060,7214990075,7214990090,7215100010,
    7215100080,7215500016,7215500018,7215500020,7215500061,7215500063,7215500065,7215500090,
    7215901000,7215903000,7215905000,7216100010,7216100050,7216210000,7216220000,7216310000,
    7216320000,7216330030,7216330060,7216330090,7216400010,7216400050,7216500000,7216990010,
    7216990090,7217101000,7217102000,7217103000,7217104040,7217104045,7217104090,7217105030,
    7217105090,7217106000,7217107000,7217108010,7217108020,7217108025,7217108030,7217108045,
    7217108060,7217108075,7217108090,7217109000,7217201500,7217203000,7217204510,7217204520,
    7217204530,7217204540,7217204550,7217204560,7217204570,7217204580,7217206000,7217207500,
    7217301530,7217301560,7217303000,7217304504,7217304511,7217304520,7217304530,7217304541,
    7217304550,7217304560,7217304590,7217306000,7217307500,7217901000,7217905030,7217905060,
    7217905090,7218100000,7218910015,7218910030,7218910060,7218990015,7218990030,7218990045,
    7218990060,7218990090,7229200015,7229200090,7229900500,7229901000,7229905006,7229905008,7229905016,7229905031,
    7229905051,7229909000,7301100000,7302101010,7302101015,7302101025,7302101035,7302101045,
    7302101055,7302101065,7302101075,7302105020,7302105040,7302105060,7302400000,7302901000,
    7302909000,7304110020,7304110050,7304110080,7304191020,7304191030,7304191045,7304191060,
    7304191080,7304195020,7304195050,7304195080,7304220030,7304220045,7304220060,7304233000,
    7304236030,7304236045,7304236060,7304243010,7304243020,7304243030,7304243040,7304243045,
    7304243080,7304244010,7304244020,7304244030,7304244040,7304244050,7304244060,7304244080,
    7304246015,7304246030,7304246045,7304246060,7304246075,7304291010,7304291020,7304291030,
    7304291040,7304291050,7304291060,7304291080,7304292010,7304292020,7304292030,7304292040,
    7304292050,7304292060,7304292080,7304293110,7304293120,7304293130,7304293140,7304293150,
    7304293160,7304293180,7304294110,7304294120,7304294130,7304294140,7304294150,7304294160,
    7304294180,7304295015,7304295030,7304295045,7304295060,7304295075,7304296115,7304296130,
    7304296145,7304296160,7304296175,7304313000,7304316010,7304316050,7304390002,7304390004,
    7304390006,7304390008,7304390016,7304390020,7304390024,7304390028,7304390032,7304390036,
    7304390040,7304390044,7304390048,7304390052,7304390056,7304390062,7304390068,7304390072,
    7304390076,7304390080,7304413005,7304413015,7304413045,7304416005,7304416015,7304416045,
    7304490005,7304490015,7304490045,7304490060,7304511000,7304515005,7304515015,7304515045,
    7304515060,7304591000,7304592030,7304592040,7304592045,7304592055,7304592060,7304592070,
    7304592080,7304596000,7304598010,7304598015,7304598020,7304598025,7304598030,7304598035,
    7304598040,7304598045,7304598050,7304598055,7304598060,7304598065,7304598070,7304598080,
    7304901000,7304903000,7304905000,7304907000,7305111030,7305111060,7305115000,7305121030,
    7305121060,7305125000,7305191030,7305191060,7305195000,7305202000,7305204000,7305206000,
    7305208000,7305312000,7305314000,7305316010,7305316090,7305391000,7305395000,7305901000,
    7305905000,7306101010,7306101050,7306105010,7306105050,7306110010,7306110050,7306191010,
    7306191050,7306195110,7306195150,7306213000,7306214000,7306218010,7306218050,7306291030,
    7306291090,7306292000,7306293100,7306294100,7306296010,7306296050,7306298110,7306298150,
    7306301000,7306303000,7306305010,7306305015,7306305020,7306305025,7306305028,7306305032,
    7306305035,7306305040,7306305055,7306305085,7306305090,7306401010,7306401015,7306401090,
    7306405005,7306405015,7306405040,7306405042,7306405044,7306405062,7306405064,7306405080,
    7306405085,7306405090,7306501000,7306503000,7306505010,7306505030,7306505050,7306505070,
    7306611000,7306613000,7306615000,7306617030,7306617060,7306691000,7306693000,7306695000,
    7306697030,7306697060,7306901000,7306905000.7301201000,7301205000,7302300000,7307211000,7307221000,7307225000,7307230030,7307230090,
    7307290030,7307290090,7307911000,7307913000,7307915010,7307915030,7307915050,7307915070,
    7307923010,7307923030,7307929000,7307933010,7307933040,7307936000,7307939010,7307939040,
    7307939060,7307991000,7307993000,7307995015,7307995045,7307995060,7308100000,7308200020,
    7308200090,7308301000,7308305015,7308305025,7308305050,7308400000,7308903000,7308906000,
    7308907000,7308909530,7308909560,7308909590,7309000030,7309000090,7310100005,7310100015,
    7310100090,7310210025,7310210050,7310290020,7310290030,7310290055,7310290065,7311000030,
    7311000060,7311000090,7312100500,7312101030,7312101050,7312101070,7312102000,7312103005,
    7312103010,7312103012,7312103020,7312103045,7312103065,7312103070,7312103074,7312103080,
    7312105000,7312106030,7312106060,7312107000,7312108000,7312109030,7312109060,7312109090,
    7312900000,7313000000,7314121000,7314122000,7314123000,7314126000,7314129000,7314141000,
    7314142000,7314143000,7314146000,7314149000,7314190100,7314200000,7314311000,7314315010,
    7314315080,7314390000,7314410030,7314410040,7314410045,7314410080,7314420030,7314420060,
    7314493000,7314496000,7314500000,7315110005,7315110010,7315110045,7315110060,7315120020,
    7315120040,7315120060,7315120080,7315190000,7315201000,7315205000,7315810000,7315821000,
    7315823000,7315825000,7315827000,7315891000,7315893000,7315895000,7315900000,7316000000,
    7317001000,7317002000,7317003000,7317005501,7317005502,7317005503,7317005505,7317005507,
    7317005508,7317005511,7317005518,7317005519,7317005520,7317005530,7317005540,7317005550,
    7317005560,7317005570,7317005580,7317005590,7317006530,7317006560,7317007500,7318110000,
    7318120000,7318130030,7318130060,7318141030,7318141060,7318145020,7318145080,7318152010,
    7318152020,7318152030,7318152041,7318152046,7318152051,7318152055,7318152061,7318152065,
    7318152091,7318152095,7318154000,7318155030,7318155051,7318155056,7318155090,7318156010,
    7318156040,7318156070,7318156080,7318158020,7318158030,7318158045,7318158055,7318158066,
    7318158069,7318158082,7318158085,7318160015,7318160030,7318160045,7318160060,7318160085,
    7318190000,7318210030,7318210090,7318220000,7318230000,7318240000,7318290000,7319402010,
    7319402050,7319403000,7319405010,7319405050,7319901000,7319909000,7320103000,7320106015,
    7320106060,7320109015,7320109060,7320201000,7320205010,7320205020,7320205045,7320205060,
    7320901000,7320905010,7320905020,7320905060,7321111030,7321111060,7321113010,7321113020,
    7321113050,7321116000,7321120000,7321190020,7321190040,7321190060,7321190080,7321811000,
    7321815000,7321821000,7321825000,7321890010,7321890050,7321901000,7321902000,7321904000,
    7321905000,7321906040,7321906060,7321906090,7326908688
  ), FALSE, tariff)) %>% #STEEL
  mutate(tariff = if_else(I_COMMODITY %in% c(
    7317003000,7317005503,7317005505,7317005507,7317005560,7317005580,7317006560,
    8708103020,8708292120,8431310020,8431310040,8431310060,8431420000,8431491010,
    8431491060,8431491090,8431499005,8431499010,8431499015,8431499020,8431499025,
    8431499030,8431499035,8431499036,8431499038,8431499044,8431499045,8431499050,
    8431499055,8431499081,8431499084,8431499090,8431499095,8432100020,8432100040,
    8432100060,8432900010,8432900020,8432900040,8432900050,8432900060,8432900081,
    8547900010,8547900020,8547900030,8547900040,9403200011,9403200016,9403200017,
    9403200035,9403200040,9403200046,9403200048,9403200050,9403200075,9403200078,
    9403200082,9403200086,9403200090,9403992040,9403992080,9403994005,9403994010,
    9403994080,9406200000,9406900110,9406900120,9406900130,9406900150,9406900190
  ) & CTY_NAME != "CHINA", FALSE, tariff)) %>% #Steel Derivatives
  mutate(tariff = if_else(I_COMMODITY_6 %in% c("732010", "830230", "840732", "840733", "840734", "850132", "850133", "850134", "850140",
                                               "850151", "850152", "852721", "852729", "853720", "870822", # "853710" excluding control panels
                                               "870829", "870830", "870850", "870870", "870880", "870891", "870894", "870895", "901510",
                                               "902910") & CTY_NAME != "CHINA", FALSE, tariff)) %>% #Car Parts
  mutate(tariff = if_else(I_COMMODITY_4 %in% c("8707") & CTY_NAME != "CHINA", FALSE, tariff)) %>% #Car Parts 
  mutate(tariff = if_else(I_COMMODITY_4 %in% c("7224","7225","7226") & CTY_NAME != "CHINA", FALSE, tariff)) %>% #ADDITIONAL STEEL
  mutate(tariff = if_else(I_COMMODITY %in% c("8507600010","8507600010") & CTY_NAME != "CHINA", FALSE, tariff)) %>%#Car Batteries
  group_by(tariff,I_COMMODITY_4) %>%
  summarise(CON_VAL_YR = sum(CON_VAL_YR)) %>%
  ungroup() %>%
  right_join(.,I_COMMODITY_4,by = c("I_COMMODITY_4" = "I_COMMODITY"))
  #mutate(tariff = c("Tariffed","Not Tariffed"))

US_BRAZIL_HS10_IMPORTS_ADJUSTED <- US_BRAZIL_HS10_IMPORTS %>%
  transmute(tariff, CON_VAL_YR = CON_VAL_YR.x, I_COMMODITY_LDESC,I_COMMODITY_4) %>%
  arrange(desc(CON_VAL_YR)) %>%
  filter(I_COMMODITY_4 != 9801) %>%
  slice(1:20) %>%
  mutate(I_COMMODITY_LDESC = c("Crude Oil", "Refined Oil Products","Coffee","Aircraft","Semifinished Iron/Steel","Chemical Woodpulp","Pig Iron","Construction Machinery","Fruit & Nut Juices","Frozen Beef","Sugar","Petroleum Coke/Residues","Alloy Steel","Electrical Transformers","Wood, Continuously Shaped","Engine Parts","Prepared/Preserved Meat","Aluminum Oxide","Building Stone","Tractors")) %>%
  mutate(I_COMMODITY_LDESC = factor(I_COMMODITY_LDESC, levels = rev(I_COMMODITY_LDESC)))

BRAZIL_IMPORTS_TOP_20_Graph <- ggplot(data = US_BRAZIL_HS10_IMPORTS_ADJUSTED, aes(x = I_COMMODITY_LDESC, y = CON_VAL_YR/1000000000,fill = tariff)) +
  annotate("hline", y = 0, yintercept = 0, color = "white", size = .5) +
  geom_bar(stat = "identity", position = "dodge", color = NA) +
  xlab(NULL) +
  ylab("Imports, Billions of Dollars") +
  scale_y_continuous(labels = scales::dollar_format(suffix = "B", accuracy = 1), limits = c(0,7.5), expand = c(0,0)) +
  ggtitle("             Top 20 Brazilian Exports to the US") +
  labs(caption = "Graph created by @JosephPolitano using Census Data") +
  scale_fill_manual(name= NULL,values = c("#00A99D","#EE6055","#9A348E","#A7ACD9","#3083DC"), labels = c("Exempted from new 50% Tariffs","Affected by new 50% Tariffs")) +
  theme_apricitas + theme(legend.position = c(.5,.35), axis.text.y = element_text(size = 15, color = "white"), plot.margin = unit(c(0.2,0.6,0.2,0.1), "cm")) +#, axis.text.x=element_blank(), axis.title.x=element_blank()) +
  coord_flip() +
  theme(plot.title.position = "plot")

ggsave(dpi = "retina",plot = BRAZIL_IMPORTS_TOP_20_Graph, "Imports Top 20 Brazil Graph.png", type = "cairo-png", width = 9.02, height = 5.76, units = "in")


US_BRAZIL_IMPORTS_TOTAL <- US_BRAZIL_HS10_IMPORTS %>%
  select(tariff,CON_VAL_YR.x) %>%
  group_by(tariff) %>%
  summarize(CON_VAL_YR.x = sum(CON_VAL_YR.x))
